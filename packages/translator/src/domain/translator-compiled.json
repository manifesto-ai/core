{
  "id": "mel:translator",
  "version": "1.0.0",
  "types": {
    "TypeField": {
      "name": "TypeField",
      "definition": {
        "kind": "object",
        "fields": {
          "typeRef": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "optional": {
            "type": {
              "kind": "primitive",
              "type": "boolean"
            },
            "optional": false
          }
        }
      }
    },
    "TypeExpr": {
      "name": "TypeExpr",
      "definition": {
        "kind": "object",
        "fields": {
          "kind": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "literal",
                  "value": "primitive"
                },
                {
                  "kind": "literal",
                  "value": "literal"
                },
                {
                  "kind": "literal",
                  "value": "ref"
                },
                {
                  "kind": "literal",
                  "value": "array"
                },
                {
                  "kind": "literal",
                  "value": "record"
                },
                {
                  "kind": "literal",
                  "value": "union"
                },
                {
                  "kind": "literal",
                  "value": "object"
                }
              ]
            },
            "optional": false
          },
          "name": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "value": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "primitive",
                  "type": "number"
                },
                {
                  "kind": "primitive",
                  "type": "boolean"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "element": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "fields": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "members": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "refName": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          }
        }
      }
    },
    "ExprNode": {
      "name": "ExprNode",
      "definition": {
        "kind": "object",
        "fields": {
          "kind": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "literal",
                  "value": "lit"
                },
                {
                  "kind": "literal",
                  "value": "var"
                },
                {
                  "kind": "literal",
                  "value": "sys"
                },
                {
                  "kind": "literal",
                  "value": "get"
                },
                {
                  "kind": "literal",
                  "value": "call"
                },
                {
                  "kind": "literal",
                  "value": "obj"
                },
                {
                  "kind": "literal",
                  "value": "arr"
                }
              ]
            },
            "optional": false
          },
          "value": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "primitive",
                  "type": "number"
                },
                {
                  "kind": "primitive",
                  "type": "boolean"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "name": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "path": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "target": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "key": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "fn": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "args": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "fields": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "items": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          }
        }
      }
    },
    "ActionParam": {
      "name": "ActionParam",
      "definition": {
        "kind": "object",
        "fields": {
          "typeRef": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "optional": {
            "type": {
              "kind": "primitive",
              "type": "boolean"
            },
            "optional": false
          },
          "defaultValue": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "primitive",
                  "type": "number"
                },
                {
                  "kind": "primitive",
                  "type": "boolean"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          }
        }
      }
    },
    "Guard": {
      "name": "Guard",
      "definition": {
        "kind": "object",
        "fields": {
          "guardKind": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "condition": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "marker": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          }
        }
      }
    },
    "ActionBlock": {
      "name": "ActionBlock",
      "definition": {
        "kind": "object",
        "fields": {
          "guard": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "body": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          }
        }
      }
    },
    "PatchOp": {
      "name": "PatchOp",
      "definition": {
        "kind": "object",
        "fields": {
          "kind": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "literal",
                  "value": "defineType"
                },
                {
                  "kind": "literal",
                  "value": "addField"
                },
                {
                  "kind": "literal",
                  "value": "addConstraint"
                },
                {
                  "kind": "literal",
                  "value": "setDefaultValue"
                },
                {
                  "kind": "literal",
                  "value": "widenFieldType"
                },
                {
                  "kind": "literal",
                  "value": "addComputed"
                },
                {
                  "kind": "literal",
                  "value": "addAction"
                },
                {
                  "kind": "literal",
                  "value": "addActionParam"
                },
                {
                  "kind": "literal",
                  "value": "addActionAvailable"
                },
                {
                  "kind": "literal",
                  "value": "addActionGuard"
                }
              ]
            },
            "optional": false
          },
          "typeName": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "definition": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "path": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "fieldType": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "defaultValue": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "primitive",
                  "type": "number"
                },
                {
                  "kind": "primitive",
                  "type": "boolean"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "constraintId": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "rule": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "message": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "value": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "primitive",
                  "type": "number"
                },
                {
                  "kind": "primitive",
                  "type": "boolean"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "newType": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "expr": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "returnType": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "actionName": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "params": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "body": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "paramName": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "param": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "block": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          }
        }
      }
    },
    "PatchFragment": {
      "name": "PatchFragment",
      "definition": {
        "kind": "object",
        "fields": {
          "fragmentId": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "sourceIntentId": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "opJson": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "confidence": {
            "type": {
              "kind": "primitive",
              "type": "number"
            },
            "optional": false
          },
          "evidenceJson": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "createdAt": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          }
        }
      }
    },
    "AmbiguityCandidate": {
      "name": "AmbiguityCandidate",
      "definition": {
        "kind": "object",
        "fields": {
          "optionId": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "description": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "fragmentsJson": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "confidence": {
            "type": {
              "kind": "primitive",
              "type": "number"
            },
            "optional": false
          },
          "evidenceJson": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          }
        }
      }
    },
    "ResolutionPrompt": {
      "name": "ResolutionPrompt",
      "definition": {
        "kind": "object",
        "fields": {
          "question": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "optionIdsJson": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          }
        }
      }
    },
    "AmbiguityReport": {
      "name": "AmbiguityReport",
      "definition": {
        "kind": "object",
        "fields": {
          "reportId": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "kind": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "literal",
                  "value": "intent"
                },
                {
                  "kind": "literal",
                  "value": "target"
                },
                {
                  "kind": "literal",
                  "value": "value"
                },
                {
                  "kind": "literal",
                  "value": "conflict"
                },
                {
                  "kind": "literal",
                  "value": "policy"
                }
              ]
            },
            "optional": false
          },
          "normalizedInput": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "candidatesJson": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "resolutionPrompt": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "ref",
                  "name": "ResolutionPrompt"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "createdAt": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "partialFragmentsJson": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          }
        }
      }
    },
    "TranslationError": {
      "name": "TranslationError",
      "definition": {
        "kind": "object",
        "fields": {
          "code": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "message": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "stage": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "detailsJson": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          }
        }
      }
    },
    "Section": {
      "name": "Section",
      "definition": {
        "kind": "object",
        "fields": {
          "text": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "index": {
            "type": {
              "kind": "primitive",
              "type": "number"
            },
            "optional": false
          }
        }
      }
    },
    "GlossaryHit": {
      "name": "GlossaryHit",
      "definition": {
        "kind": "object",
        "fields": {
          "term": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "normalized": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          }
        }
      }
    },
    "Token": {
      "name": "Token",
      "definition": {
        "kind": "object",
        "fields": {
          "text": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "kind": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          }
        }
      }
    },
    "NormalizationResult": {
      "name": "NormalizationResult",
      "definition": {
        "kind": "object",
        "fields": {
          "canonical": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "language": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "glossaryHitsJson": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "tokensJson": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          }
        }
      }
    },
    "FastPathCandidate": {
      "name": "FastPathCandidate",
      "definition": {
        "kind": "object",
        "fields": {
          "patternId": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "confidence": {
            "type": {
              "kind": "primitive",
              "type": "number"
            },
            "optional": false
          },
          "fragmentsJson": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          }
        }
      }
    },
    "FastPathResult": {
      "name": "FastPathResult",
      "definition": {
        "kind": "object",
        "fields": {
          "matched": {
            "type": {
              "kind": "primitive",
              "type": "boolean"
            },
            "optional": false
          },
          "bestJson": {
            "type": {
              "kind": "union",
              "types": [
                {
                  "kind": "primitive",
                  "type": "string"
                },
                {
                  "kind": "literal",
                  "value": null
                }
              ]
            },
            "optional": false
          },
          "candidatesJson": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          }
        }
      }
    },
    "AnchorCandidate": {
      "name": "AnchorCandidate",
      "definition": {
        "kind": "object",
        "fields": {
          "path": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "confidence": {
            "type": {
              "kind": "primitive",
              "type": "number"
            },
            "optional": false
          },
          "reason": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          }
        }
      }
    },
    "RetrievalResult": {
      "name": "RetrievalResult",
      "definition": {
        "kind": "object",
        "fields": {
          "anchorsJson": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "tier": {
            "type": {
              "kind": "primitive",
              "type": "number"
            },
            "optional": false
          }
        }
      }
    },
    "MemoryExample": {
      "name": "MemoryExample",
      "definition": {
        "kind": "object",
        "fields": {
          "input": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "outputJson": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "worldId": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          }
        }
      }
    },
    "SchemaSnapshot": {
      "name": "SchemaSnapshot",
      "definition": {
        "kind": "object",
        "fields": {
          "worldId": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "schemaHash": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          }
        }
      }
    },
    "GlossaryTerm": {
      "name": "GlossaryTerm",
      "definition": {
        "kind": "object",
        "fields": {
          "term": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "meaning": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          }
        }
      }
    },
    "ResolutionRecord": {
      "name": "ResolutionRecord",
      "definition": {
        "kind": "object",
        "fields": {
          "reportId": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "choice": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          }
        }
      }
    },
    "MemoryContent": {
      "name": "MemoryContent",
      "definition": {
        "kind": "object",
        "fields": {
          "examplesJson": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "schemaSnapshotsJson": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "glossaryTermsJson": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "resolutionRecordsJson": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          }
        }
      }
    },
    "MemoryStageResult": {
      "name": "MemoryStageResult",
      "definition": {
        "kind": "object",
        "fields": {
          "contentJson": {
            "type": {
              "kind": "primitive",
              "type": "string"
            },
            "optional": false
          },
          "selectedCount": {
            "type": {
              "kind": "primitive",
              "type": "number"
            },
            "optional": false
          },
          "degraded": {
            "type": {
              "kind": "primitive",
              "type": "boolean"
            },
            "optional": false
          }
        }
      }
    }
  },
  "state": {
    "fields": {
      "status": {
        "type": {
          "enum": [
            "idle",
            "chunking",
            "normalizing",
            "fast_path",
            "retrieval",
            "memory",
            "proposing",
            "assembling",
            "awaiting_resolution",
            "success",
            "error"
          ]
        },
        "required": true,
        "default": "idle"
      },
      "input": {
        "type": "string",
        "required": true,
        "default": null
      },
      "atWorldId": {
        "type": "string",
        "required": true,
        "default": null
      },
      "schemaHash": {
        "type": "string",
        "required": true,
        "default": null
      },
      "intentId": {
        "type": "string",
        "required": true,
        "default": null
      },
      "translateIntent": {
        "type": "string",
        "required": true,
        "default": null
      },
      "resolveIntent": {
        "type": "string",
        "required": true,
        "default": null
      },
      "chunksJson": {
        "type": "string",
        "required": true,
        "default": null
      },
      "normalizationJson": {
        "type": "string",
        "required": true,
        "default": null
      },
      "fastPathJson": {
        "type": "string",
        "required": true,
        "default": null
      },
      "retrievalJson": {
        "type": "string",
        "required": true,
        "default": null
      },
      "memoryResultJson": {
        "type": "string",
        "required": true,
        "default": null
      },
      "proposedFragmentsJson": {
        "type": "string",
        "required": true,
        "default": null
      },
      "fragmentsJson": {
        "type": "string",
        "required": true,
        "default": null
      },
      "ambiguityReportJson": {
        "type": "string",
        "required": true,
        "default": null
      },
      "errorJson": {
        "type": "string",
        "required": true,
        "default": null
      },
      "traceId": {
        "type": "string",
        "required": true,
        "default": null
      },
      "startedAt": {
        "type": "number",
        "required": true,
        "default": null
      },
      "completedAt": {
        "type": "number",
        "required": true,
        "default": null
      },
      "chunkingDuration": {
        "type": "number",
        "required": true,
        "default": null
      },
      "normalizationDuration": {
        "type": "number",
        "required": true,
        "default": null
      },
      "fastPathDuration": {
        "type": "number",
        "required": true,
        "default": null
      },
      "retrievalDuration": {
        "type": "number",
        "required": true,
        "default": null
      },
      "memoryDuration": {
        "type": "number",
        "required": true,
        "default": null
      },
      "proposerDuration": {
        "type": "number",
        "required": true,
        "default": null
      },
      "assemblyDuration": {
        "type": "number",
        "required": true,
        "default": null
      }
    }
  },
  "computed": {
    "fields": {
      "computed.isIdle": {
        "deps": [
          "status"
        ],
        "expr": {
          "kind": "eq",
          "left": {
            "kind": "get",
            "path": "status"
          },
          "right": {
            "kind": "lit",
            "value": "idle"
          }
        }
      },
      "computed.isProcessing": {
        "deps": [
          "status"
        ],
        "expr": {
          "kind": "and",
          "args": [
            {
              "kind": "not",
              "arg": {
                "kind": "eq",
                "left": {
                  "kind": "get",
                  "path": "status"
                },
                "right": {
                  "kind": "lit",
                  "value": "idle"
                }
              }
            },
            {
              "kind": "not",
              "arg": {
                "kind": "eq",
                "left": {
                  "kind": "get",
                  "path": "status"
                },
                "right": {
                  "kind": "lit",
                  "value": "success"
                }
              }
            },
            {
              "kind": "not",
              "arg": {
                "kind": "eq",
                "left": {
                  "kind": "get",
                  "path": "status"
                },
                "right": {
                  "kind": "lit",
                  "value": "error"
                }
              }
            },
            {
              "kind": "not",
              "arg": {
                "kind": "eq",
                "left": {
                  "kind": "get",
                  "path": "status"
                },
                "right": {
                  "kind": "lit",
                  "value": "awaiting_resolution"
                }
              }
            }
          ]
        }
      },
      "computed.isTerminal": {
        "deps": [
          "status"
        ],
        "expr": {
          "kind": "or",
          "args": [
            {
              "kind": "eq",
              "left": {
                "kind": "get",
                "path": "status"
              },
              "right": {
                "kind": "lit",
                "value": "success"
              }
            },
            {
              "kind": "eq",
              "left": {
                "kind": "get",
                "path": "status"
              },
              "right": {
                "kind": "lit",
                "value": "error"
              }
            }
          ]
        }
      },
      "computed.hasAmbiguity": {
        "deps": [
          "status"
        ],
        "expr": {
          "kind": "eq",
          "left": {
            "kind": "get",
            "path": "status"
          },
          "right": {
            "kind": "lit",
            "value": "awaiting_resolution"
          }
        }
      },
      "computed.hasError": {
        "deps": [
          "errorJson"
        ],
        "expr": {
          "kind": "not",
          "arg": {
            "kind": "isNull",
            "arg": {
              "kind": "get",
              "path": "errorJson"
            }
          }
        }
      },
      "computed.hasResult": {
        "deps": [
          "status",
          "fragmentsJson"
        ],
        "expr": {
          "kind": "and",
          "args": [
            {
              "kind": "eq",
              "left": {
                "kind": "get",
                "path": "status"
              },
              "right": {
                "kind": "lit",
                "value": "success"
              }
            },
            {
              "kind": "not",
              "arg": {
                "kind": "isNull",
                "arg": {
                  "kind": "get",
                  "path": "fragmentsJson"
                }
              }
            }
          ]
        }
      },
      "computed.chunkingComplete": {
        "deps": [
          "chunkingDuration"
        ],
        "expr": {
          "kind": "not",
          "arg": {
            "kind": "isNull",
            "arg": {
              "kind": "get",
              "path": "chunkingDuration"
            }
          }
        }
      },
      "computed.normalizationComplete": {
        "deps": [
          "normalizationDuration"
        ],
        "expr": {
          "kind": "not",
          "arg": {
            "kind": "isNull",
            "arg": {
              "kind": "get",
              "path": "normalizationDuration"
            }
          }
        }
      },
      "computed.fastPathComplete": {
        "deps": [
          "fastPathDuration"
        ],
        "expr": {
          "kind": "not",
          "arg": {
            "kind": "isNull",
            "arg": {
              "kind": "get",
              "path": "fastPathDuration"
            }
          }
        }
      },
      "computed.retrievalComplete": {
        "deps": [
          "retrievalDuration"
        ],
        "expr": {
          "kind": "not",
          "arg": {
            "kind": "isNull",
            "arg": {
              "kind": "get",
              "path": "retrievalDuration"
            }
          }
        }
      },
      "computed.memoryComplete": {
        "deps": [
          "memoryDuration"
        ],
        "expr": {
          "kind": "not",
          "arg": {
            "kind": "isNull",
            "arg": {
              "kind": "get",
              "path": "memoryDuration"
            }
          }
        }
      },
      "computed.proposerComplete": {
        "deps": [
          "proposerDuration"
        ],
        "expr": {
          "kind": "not",
          "arg": {
            "kind": "isNull",
            "arg": {
              "kind": "get",
              "path": "proposerDuration"
            }
          }
        }
      },
      "computed.assemblyComplete": {
        "deps": [
          "assemblyDuration"
        ],
        "expr": {
          "kind": "not",
          "arg": {
            "kind": "isNull",
            "arg": {
              "kind": "get",
              "path": "assemblyDuration"
            }
          }
        }
      },
      "computed.totalDuration": {
        "deps": [
          "completedAt",
          "startedAt"
        ],
        "expr": {
          "kind": "if",
          "cond": {
            "kind": "not",
            "arg": {
              "kind": "isNull",
              "arg": {
                "kind": "get",
                "path": "completedAt"
              }
            }
          },
          "then": {
            "kind": "sub",
            "left": {
              "kind": "get",
              "path": "completedAt"
            },
            "right": {
              "kind": "coalesce",
              "args": [
                {
                  "kind": "get",
                  "path": "startedAt"
                },
                {
                  "kind": "lit",
                  "value": 0
                }
              ]
            }
          },
          "else": {
            "kind": "lit",
            "value": null
          }
        }
      }
    }
  },
  "actions": {
    "translate": {
      "flow": {
        "kind": "if",
        "cond": {
          "kind": "neq",
          "left": {
            "kind": "get",
            "path": "translateIntent"
          },
          "right": {
            "kind": "get",
            "path": "meta.intentId"
          }
        },
        "then": {
          "kind": "seq",
          "steps": [
            {
              "kind": "patch",
              "op": "set",
              "path": "translateIntent",
              "value": {
                "kind": "get",
                "path": "meta.intentId"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "translateIntent",
              "value": {
                "kind": "get",
                "path": "meta.intentId"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "intentId",
              "value": {
                "kind": "get",
                "path": "meta.intentId"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "input",
              "value": {
                "kind": "get",
                "path": "input"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "atWorldId",
              "value": {
                "kind": "get",
                "path": "atWorldId"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "schemaHash",
              "value": {
                "kind": "get",
                "path": "schemaHash"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "status",
              "value": {
                "kind": "lit",
                "value": "chunking"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "startedAt",
              "value": {
                "kind": "get",
                "path": "$system.timestamp"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "traceId",
              "value": {
                "kind": "get",
                "path": "$system.uuid"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "chunksJson",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "normalizationJson",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "fastPathJson",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "retrievalJson",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "memoryResultJson",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "proposedFragmentsJson",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "fragmentsJson",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "ambiguityReportJson",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "errorJson",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "completedAt",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "chunkingDuration",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "normalizationDuration",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "fastPathDuration",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "retrievalDuration",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "memoryDuration",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "proposerDuration",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "assemblyDuration",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "effect",
              "type": "translator.chunk",
              "params": {
                "input": {
                  "kind": "get",
                  "path": "input"
                },
                "atWorldId": {
                  "kind": "get",
                  "path": "atWorldId"
                }
              }
            }
          ]
        }
      },
      "input": {
        "type": "object",
        "required": true,
        "fields": {
          "input": {
            "type": "string",
            "required": true
          },
          "atWorldId": {
            "type": "string",
            "required": true
          },
          "schemaHash": {
            "type": "string",
            "required": true
          }
        }
      },
      "available": {
        "kind": "get",
        "path": "computed.isIdle"
      }
    },
    "receiveChunks": {
      "flow": {
        "kind": "if",
        "cond": {
          "kind": "lit",
          "value": true
        },
        "then": {
          "kind": "seq",
          "steps": [
            {
              "kind": "patch",
              "op": "set",
              "path": "chunksJson",
              "value": {
                "kind": "get",
                "path": "input.sectionsJson"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "chunkingDuration",
              "value": {
                "kind": "get",
                "path": "input.durationMs"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "status",
              "value": {
                "kind": "lit",
                "value": "normalizing"
              }
            },
            {
              "kind": "effect",
              "type": "translator.normalize",
              "params": {
                "sectionsJson": {
                  "kind": "get",
                  "path": "input.sectionsJson"
                },
                "atWorldId": {
                  "kind": "get",
                  "path": "atWorldId"
                },
                "schemaHash": {
                  "kind": "get",
                  "path": "schemaHash"
                }
              }
            }
          ]
        }
      },
      "input": {
        "type": "object",
        "required": true,
        "fields": {
          "sectionsJson": {
            "type": "string",
            "required": true
          },
          "durationMs": {
            "type": "number",
            "required": true
          }
        }
      },
      "available": {
        "kind": "eq",
        "left": {
          "kind": "get",
          "path": "status"
        },
        "right": {
          "kind": "lit",
          "value": "chunking"
        }
      }
    },
    "receiveNormalization": {
      "flow": {
        "kind": "if",
        "cond": {
          "kind": "lit",
          "value": true
        },
        "then": {
          "kind": "seq",
          "steps": [
            {
              "kind": "patch",
              "op": "set",
              "path": "normalizationJson",
              "value": {
                "kind": "get",
                "path": "input.resultJson"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "normalizationDuration",
              "value": {
                "kind": "get",
                "path": "input.durationMs"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "status",
              "value": {
                "kind": "lit",
                "value": "fast_path"
              }
            },
            {
              "kind": "effect",
              "type": "translator.fastPath",
              "params": {
                "normalizationJson": {
                  "kind": "get",
                  "path": "input.resultJson"
                },
                "atWorldId": {
                  "kind": "get",
                  "path": "atWorldId"
                },
                "schemaHash": {
                  "kind": "get",
                  "path": "schemaHash"
                }
              }
            }
          ]
        }
      },
      "input": {
        "type": "object",
        "required": true,
        "fields": {
          "resultJson": {
            "type": "string",
            "required": true
          },
          "durationMs": {
            "type": "number",
            "required": true
          }
        }
      },
      "available": {
        "kind": "eq",
        "left": {
          "kind": "get",
          "path": "status"
        },
        "right": {
          "kind": "lit",
          "value": "normalizing"
        }
      }
    },
    "receiveFastPathMatch": {
      "flow": {
        "kind": "if",
        "cond": {
          "kind": "lit",
          "value": true
        },
        "then": {
          "kind": "seq",
          "steps": [
            {
              "kind": "patch",
              "op": "set",
              "path": "fastPathJson",
              "value": {
                "kind": "get",
                "path": "input.resultJson"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "fastPathDuration",
              "value": {
                "kind": "get",
                "path": "input.durationMs"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "proposedFragmentsJson",
              "value": {
                "kind": "get",
                "path": "input.bestFragmentsJson"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "status",
              "value": {
                "kind": "lit",
                "value": "assembling"
              }
            },
            {
              "kind": "effect",
              "type": "translator.assemble",
              "params": {
                "fragmentsJson": {
                  "kind": "get",
                  "path": "input.bestFragmentsJson"
                },
                "atWorldId": {
                  "kind": "get",
                  "path": "atWorldId"
                },
                "schemaHash": {
                  "kind": "get",
                  "path": "schemaHash"
                }
              }
            }
          ]
        }
      },
      "input": {
        "type": "object",
        "required": true,
        "fields": {
          "resultJson": {
            "type": "string",
            "required": true
          },
          "bestFragmentsJson": {
            "type": "string",
            "required": true
          },
          "durationMs": {
            "type": "number",
            "required": true
          }
        }
      },
      "available": {
        "kind": "eq",
        "left": {
          "kind": "get",
          "path": "status"
        },
        "right": {
          "kind": "lit",
          "value": "fast_path"
        }
      }
    },
    "receiveFastPathMiss": {
      "flow": {
        "kind": "if",
        "cond": {
          "kind": "lit",
          "value": true
        },
        "then": {
          "kind": "seq",
          "steps": [
            {
              "kind": "patch",
              "op": "set",
              "path": "fastPathJson",
              "value": {
                "kind": "get",
                "path": "input.resultJson"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "fastPathDuration",
              "value": {
                "kind": "get",
                "path": "input.durationMs"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "status",
              "value": {
                "kind": "lit",
                "value": "retrieval"
              }
            },
            {
              "kind": "effect",
              "type": "translator.retrieve",
              "params": {
                "normalizationJson": {
                  "kind": "get",
                  "path": "normalizationJson"
                },
                "atWorldId": {
                  "kind": "get",
                  "path": "atWorldId"
                },
                "schemaHash": {
                  "kind": "get",
                  "path": "schemaHash"
                }
              }
            }
          ]
        }
      },
      "input": {
        "type": "object",
        "required": true,
        "fields": {
          "resultJson": {
            "type": "string",
            "required": true
          },
          "durationMs": {
            "type": "number",
            "required": true
          }
        }
      },
      "available": {
        "kind": "eq",
        "left": {
          "kind": "get",
          "path": "status"
        },
        "right": {
          "kind": "lit",
          "value": "fast_path"
        }
      }
    },
    "receiveRetrieval": {
      "flow": {
        "kind": "if",
        "cond": {
          "kind": "lit",
          "value": true
        },
        "then": {
          "kind": "seq",
          "steps": [
            {
              "kind": "patch",
              "op": "set",
              "path": "retrievalJson",
              "value": {
                "kind": "get",
                "path": "input.resultJson"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "retrievalDuration",
              "value": {
                "kind": "get",
                "path": "input.durationMs"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "status",
              "value": {
                "kind": "lit",
                "value": "memory"
              }
            },
            {
              "kind": "effect",
              "type": "translator.memory",
              "params": {
                "normalizationJson": {
                  "kind": "get",
                  "path": "normalizationJson"
                },
                "anchorsJson": {
                  "kind": "get",
                  "path": "input.resultJson"
                },
                "atWorldId": {
                  "kind": "get",
                  "path": "atWorldId"
                },
                "schemaHash": {
                  "kind": "get",
                  "path": "schemaHash"
                }
              }
            }
          ]
        }
      },
      "input": {
        "type": "object",
        "required": true,
        "fields": {
          "resultJson": {
            "type": "string",
            "required": true
          },
          "durationMs": {
            "type": "number",
            "required": true
          }
        }
      },
      "available": {
        "kind": "eq",
        "left": {
          "kind": "get",
          "path": "status"
        },
        "right": {
          "kind": "lit",
          "value": "retrieval"
        }
      }
    },
    "receiveMemory": {
      "flow": {
        "kind": "if",
        "cond": {
          "kind": "lit",
          "value": true
        },
        "then": {
          "kind": "seq",
          "steps": [
            {
              "kind": "patch",
              "op": "set",
              "path": "memoryResultJson",
              "value": {
                "kind": "get",
                "path": "input.resultJson"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "memoryDuration",
              "value": {
                "kind": "get",
                "path": "input.durationMs"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "status",
              "value": {
                "kind": "lit",
                "value": "proposing"
              }
            },
            {
              "kind": "effect",
              "type": "translator.propose",
              "params": {
                "normalizationJson": {
                  "kind": "get",
                  "path": "normalizationJson"
                },
                "anchorsJson": {
                  "kind": "get",
                  "path": "retrievalJson"
                },
                "memoryContentJson": {
                  "kind": "get",
                  "path": "input.resultJson"
                },
                "atWorldId": {
                  "kind": "get",
                  "path": "atWorldId"
                },
                "schemaHash": {
                  "kind": "get",
                  "path": "schemaHash"
                }
              }
            }
          ]
        }
      },
      "input": {
        "type": "object",
        "required": true,
        "fields": {
          "resultJson": {
            "type": "string",
            "required": true
          },
          "durationMs": {
            "type": "number",
            "required": true
          }
        }
      },
      "available": {
        "kind": "eq",
        "left": {
          "kind": "get",
          "path": "status"
        },
        "right": {
          "kind": "lit",
          "value": "memory"
        }
      }
    },
    "receiveProposal": {
      "flow": {
        "kind": "if",
        "cond": {
          "kind": "lit",
          "value": true
        },
        "then": {
          "kind": "seq",
          "steps": [
            {
              "kind": "patch",
              "op": "set",
              "path": "proposedFragmentsJson",
              "value": {
                "kind": "get",
                "path": "proposedFragmentsJson"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "proposerDuration",
              "value": {
                "kind": "get",
                "path": "input.durationMs"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "status",
              "value": {
                "kind": "lit",
                "value": "assembling"
              }
            },
            {
              "kind": "effect",
              "type": "translator.assemble",
              "params": {
                "fragmentsJson": {
                  "kind": "get",
                  "path": "proposedFragmentsJson"
                },
                "atWorldId": {
                  "kind": "get",
                  "path": "atWorldId"
                },
                "schemaHash": {
                  "kind": "get",
                  "path": "schemaHash"
                }
              }
            }
          ]
        }
      },
      "input": {
        "type": "object",
        "required": true,
        "fields": {
          "proposedFragmentsJson": {
            "type": "string",
            "required": true
          },
          "durationMs": {
            "type": "number",
            "required": true
          }
        }
      },
      "available": {
        "kind": "eq",
        "left": {
          "kind": "get",
          "path": "status"
        },
        "right": {
          "kind": "lit",
          "value": "proposing"
        }
      }
    },
    "requestResolution": {
      "flow": {
        "kind": "if",
        "cond": {
          "kind": "lit",
          "value": true
        },
        "then": {
          "kind": "seq",
          "steps": [
            {
              "kind": "patch",
              "op": "set",
              "path": "ambiguityReportJson",
              "value": {
                "kind": "get",
                "path": "input.reportJson"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "status",
              "value": {
                "kind": "lit",
                "value": "awaiting_resolution"
              }
            }
          ]
        }
      },
      "input": {
        "type": "object",
        "required": true,
        "fields": {
          "reportJson": {
            "type": "string",
            "required": true
          }
        }
      },
      "available": {
        "kind": "eq",
        "left": {
          "kind": "get",
          "path": "status"
        },
        "right": {
          "kind": "lit",
          "value": "proposing"
        }
      }
    },
    "resolve": {
      "flow": {
        "kind": "if",
        "cond": {
          "kind": "neq",
          "left": {
            "kind": "get",
            "path": "resolveIntent"
          },
          "right": {
            "kind": "get",
            "path": "meta.intentId"
          }
        },
        "then": {
          "kind": "seq",
          "steps": [
            {
              "kind": "patch",
              "op": "set",
              "path": "resolveIntent",
              "value": {
                "kind": "get",
                "path": "meta.intentId"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "resolveIntent",
              "value": {
                "kind": "get",
                "path": "meta.intentId"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "status",
              "value": {
                "kind": "lit",
                "value": "proposing"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "ambiguityReportJson",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "effect",
              "type": "translator.propose",
              "params": {
                "normalizationJson": {
                  "kind": "get",
                  "path": "normalizationJson"
                },
                "anchorsJson": {
                  "kind": "coalesce",
                  "args": [
                    {
                      "kind": "get",
                      "path": "retrievalJson"
                    },
                    {
                      "kind": "lit",
                      "value": "[]"
                    }
                  ]
                },
                "memoryContentJson": {
                  "kind": "coalesce",
                  "args": [
                    {
                      "kind": "get",
                      "path": "memoryResultJson"
                    },
                    {
                      "kind": "lit",
                      "value": "{}"
                    }
                  ]
                },
                "atWorldId": {
                  "kind": "get",
                  "path": "atWorldId"
                },
                "schemaHash": {
                  "kind": "get",
                  "path": "schemaHash"
                },
                "resolution": {
                  "kind": "get",
                  "path": "input.selectedOptionId"
                }
              }
            }
          ]
        }
      },
      "input": {
        "type": "object",
        "required": true,
        "fields": {
          "reportId": {
            "type": "string",
            "required": true
          },
          "selectedOptionId": {
            "type": "string",
            "required": true
          }
        }
      },
      "available": {
        "kind": "get",
        "path": "computed.hasAmbiguity"
      }
    },
    "receiveAssembly": {
      "flow": {
        "kind": "if",
        "cond": {
          "kind": "lit",
          "value": true
        },
        "then": {
          "kind": "seq",
          "steps": [
            {
              "kind": "patch",
              "op": "set",
              "path": "fragmentsJson",
              "value": {
                "kind": "get",
                "path": "input.assembledFragmentsJson"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "assemblyDuration",
              "value": {
                "kind": "get",
                "path": "input.durationMs"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "status",
              "value": {
                "kind": "lit",
                "value": "success"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "completedAt",
              "value": {
                "kind": "get",
                "path": "$system.timestamp"
              }
            }
          ]
        }
      },
      "input": {
        "type": "object",
        "required": true,
        "fields": {
          "assembledFragmentsJson": {
            "type": "string",
            "required": true
          },
          "durationMs": {
            "type": "number",
            "required": true
          }
        }
      },
      "available": {
        "kind": "eq",
        "left": {
          "kind": "get",
          "path": "status"
        },
        "right": {
          "kind": "lit",
          "value": "assembling"
        }
      }
    },
    "handleError": {
      "flow": {
        "kind": "if",
        "cond": {
          "kind": "lit",
          "value": true
        },
        "then": {
          "kind": "seq",
          "steps": [
            {
              "kind": "patch",
              "op": "set",
              "path": "errorJson",
              "value": {
                "kind": "get",
                "path": "input.errorInfoJson"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "status",
              "value": {
                "kind": "lit",
                "value": "error"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "completedAt",
              "value": {
                "kind": "get",
                "path": "$system.timestamp"
              }
            }
          ]
        }
      },
      "input": {
        "type": "object",
        "required": true,
        "fields": {
          "errorInfoJson": {
            "type": "string",
            "required": true
          }
        }
      },
      "available": {
        "kind": "get",
        "path": "computed.isProcessing"
      }
    },
    "cancel": {
      "flow": {
        "kind": "if",
        "cond": {
          "kind": "lit",
          "value": true
        },
        "then": {
          "kind": "seq",
          "steps": [
            {
              "kind": "patch",
              "op": "set",
              "path": "errorJson",
              "value": {
                "kind": "lit",
                "value": "{\"code\":\"CANCELLED\",\"message\":\"Translation cancelled by user\"}"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "status",
              "value": {
                "kind": "lit",
                "value": "error"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "completedAt",
              "value": {
                "kind": "get",
                "path": "$system.timestamp"
              }
            }
          ]
        }
      },
      "available": {
        "kind": "get",
        "path": "computed.isProcessing"
      }
    },
    "reset": {
      "flow": {
        "kind": "if",
        "cond": {
          "kind": "lit",
          "value": true
        },
        "then": {
          "kind": "seq",
          "steps": [
            {
              "kind": "patch",
              "op": "set",
              "path": "status",
              "value": {
                "kind": "lit",
                "value": "idle"
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "input",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "atWorldId",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "schemaHash",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "intentId",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "translateIntent",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "resolveIntent",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "chunksJson",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "normalizationJson",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "fastPathJson",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "retrievalJson",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "memoryResultJson",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "proposedFragmentsJson",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "fragmentsJson",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "ambiguityReportJson",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "errorJson",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "traceId",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "startedAt",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "completedAt",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "chunkingDuration",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "normalizationDuration",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "fastPathDuration",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "retrievalDuration",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "memoryDuration",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "proposerDuration",
              "value": {
                "kind": "lit",
                "value": null
              }
            },
            {
              "kind": "patch",
              "op": "set",
              "path": "assemblyDuration",
              "value": {
                "kind": "lit",
                "value": null
              }
            }
          ]
        }
      },
      "available": {
        "kind": "get",
        "path": "computed.isTerminal"
      }
    }
  },
  "meta": {
    "name": "Translator"
  },
  "hash": "mel:a8d9fdf927a16921"
}